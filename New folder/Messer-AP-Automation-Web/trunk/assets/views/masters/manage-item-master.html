<script type="text/javascript">
$(function() {
	
	// Clear event
	$('.image-preview-clear').click(function(){
	    $('.image-preview').attr("data-content","").popover('hide');
	    $('.image-preview-filename').val("");
	    $('.image-preview-clear').hide();
	    $('.image-preview-input input:file').val("");
	    $(".image-preview-input-title").text("Browse"); 
	}); 

	// Create the preview image
	$(".image-preview-input input:file").change(function (){     
	    var img = $('<img/>', {
	        id: 'dynamic',
	        width:250,
	        height:200
	    });      
	    var file = this.files[0];
	    var reader = new FileReader();
	    // Set preview image into the popover data-content
	    reader.onload = function (e) {
	        $(".image-preview-input-title").text("Change");
	        $(".image-preview-clear").show();
	        $(".image-preview-filename").val(file.name);            
	        img.attr('src', e.target.result);
	        $(".image-preview").attr("data-content",$(img)[0].outerHTML).popover("show");
	    }        
	    reader.readAsDataURL(file);
	});  
	});
</script>


<div ng-controller="manageItemMasterCtrl as ItemMasterCtrl">
	<!-- start: PAGE TITLE -->
	<section id="page-title">
		<div class="row">
			<div class="col-sm-12">
			<form name="Form" novalidate ng-submit="form.submit(Form)">
			<div class="col-md-4">
				<h1 class="mainTitle">Manage Item</h1>
				</div>
				<div class="col-md-4 alert-box">
					<span id="saveMsg"></span>
				</div>
				<div class="col-md-4 text-right pull-right no-padding">
				
				<a href="javascript:;" data-toggle="collapse" data-target="#uploadFile">
                                        <button type="button" class="btn btn-primary">
                                            <i class="fa fa-upload" aria-hidden="true"></i> Upload Excel
                                        </button>
                                    </a>
                                    
					<button type="submit" 
					ng-click="submitted=true"
						class="btn btn-primary">
						<i class="fa fa-floppy-o" aria-hidden="true"></i> Save
					</button>
					
					<button type="reset" ng-click="clear()" class="btn btn-primary">
						<i class="fa fa-eraser" aria-hidden="true"></i> Clear
					</button>
				</div>
			</div>
		</div>
	</section>
	<!-- end: PAGE TITLE -->
	<div class="container-fluid container-fullw form-box">
		<div class="row">
			<div class="col-sm-12">
				<div class="inner-page-box">
					
						<div id="hidestateform">
							<div class="row">
							
							
                     <div class="col-sm-12  panel-collapse collapse " id="uploadFile">							
							<div class="form-group col-md-6 no-padding" >
								
								<div class="col-sm-8 padding-right-0">
									
									<div class="input-group image-preview">
										<span class="input-group-addon"><i
											class="fa fa-file-image-o" aria-hidden="true"></i></span> <input
											type="text" class="form-control image-preview-filename"
											disabled="disabled"> <span class="input-group-btn">
											image-preview-clear button
											<button type="button"
												class="btn btn-default image-preview-clear"
												style="display: none;">
												<span class="glyphicon glyphicon-remove"></span> Clear
											</button> image-preview-input
											<div class="btn btn-primary image-preview-input">
												<span class="glyphicon glyphicon-search"></span> <span
													class="image-preview-input-title">Browse</span> <input
													type="file"value="alasqlupload" nng-file-upload id="ExcelItemFile"
													accept=".xlsx"
													name="input-file-preview" />
											</div>
										</span>
									</div>
								</div>
							</div>
							<div class="form-group col-md-4 no-padding">
								<button type="button" ng-click="uploadItems()"
									class="btn btn-primary">
									<i class="fa fa-arrow-right"></i> Import
								</button>	
								<a href="/assets/template/SVMP Import Tempates.xlsx"><button type="button"  
									class="btn btn-default">
									<i class="fa fa-download"></i> Download Template</button></a>
								                                                                                               
							</div>
					</div>
                     
               
                    
                     
                     
								<div class="col-md-4 form-group no-padding"
									ng-class="{'has-error':Form.itemName.$dirty && Form.itemName.$invalid, 'has-success':Form.itemName.$valid}">
									<label class="col-sm-5 control-label" for="itemName">Item
										Name <span class="symbol required"></span>
									</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="itemName"
											name="itemName" ng-model="data.itemName" required> <span
											class="error text-small block"
											ng-if="Form.itemName.$dirty && Form.itemName.$invalid">Item
											Name is mandatory</span>
									</div>
								</div>

								<div class="col-md-4 form-group no-padding">
									<label class="col-sm-5 control-label" for="">Item Desc</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" name="itemDesc"
											ng-model="data.itemDesc">
									</div>
								</div>
								<div class="col-md-4 form-group no-padding"
									ng-class="{'has-error':Form.itemType.$dirty && Form.itemType.$invalid, 'has-success':Form.itemType.$valid}">
									<label class="col-sm-5 control-label" for="itemType">Item Type <span class="symbol required"></span></label>
									<div class="col-sm-7">
										<select id="itemType" class="form-control" ng-model="data.itemType" name="itemType" required>
											<option value="" selected>--Select Item Type--</option>
											<option value="Goods">Goods</option>
											<option value="Services">Services</option>
										</select> 
										<span class="error text-small block" ng-if="Form.itemType.$dirty && Form.itemType.$invalid">Item Type is mandatory</span>
									</div>
								</div>

								<div class="col-md-4 form-group no-padding"
									ng-class="{'has-error':Form.hsnCode.$dirty && Form.hsnCode.$invalid, 'has-success':Form.hsnCode.$valid}">
									<label class="col-sm-5 control-label" for="hsnCode">HSN
										Code <span class="symbol required"></span>
									</label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="hsnCode" name="hsnCode" ng-model="data.hsnCode"
											required-notification="HSN is mandatory" required> 
										<span class="error text-small block" ng-if="Form.hsnCode.$dirty && Form.hsnCode.$invalid">HSN Code is mandatory</span>
									</div>
								</div>

								<div class="col-md-4 form-group no-padding"
									ng-class="{'has-error':Form.rate.$dirty && Form.rate.$invalid, 'has-success':Form.rate.$valid}">
									<label class="col-sm-5 control-label" for="rate">Tax Rate<span
										class="symbol required"></span></label>
									<div class="col-sm-7">
										<input type="text" class="form-control" id="rate" name="rate"
											ng-model="data.rate" ng-pattern="/^\d+(?:\.\d{1,2})?$/"
											required> 
											<span class="error text-small block" ng-if="Form.rate.$dirty && Form.rate.$error.required">TaxRate is mandatory</span>
											<span class="error text-small block" ng-if="Form.rate.$error.pattern">TaxRate Should be Numeric or should contain maximum 2 decimals</span>
									</div>
								</div>

							</div>
						</div>
					</form>
					<table datatable="" dt-options="ItemMasterCtrl.dtOptions"
						dt-columns="ItemMasterCtrl.dtColumns" dt-instance="dtInstance"
						class="table table-striped table-bordered">
					</table>

				</div>
			</div>
		</div>
	</div>
</div>